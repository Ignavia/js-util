!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.IGNAVIA_UTIL={})}(this,function(a){"use strict";var b,c,d=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a},e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(){f(this,a),this.recursionLevel=0,this.context=new Map}return g(a,[{key:"clone",value:function(a){var b=void 0;if(this.recursionLevel++,this.isPrimitive(a))b=a;else if(this.context.has(a))b=this.context.get(a);else if(this.isDate(a))b=this.cloneDate(a);else if(this.isRegExp(a))b=this.cloneRegExp(a);else if(this.isArray(a))b=this.cloneArray(a);else{if(!this.isObject(a))throw new Error(a+" cannot be cloned.");b=this.cloneObject(a)}return this.recursionLevel--,this.cleanup(),b}},{key:"isPrimitive",value:function(a){return null===a||"object"!=typeof a}},{key:"isDate",value:function(a){return a instanceof Date}},{key:"cloneDate",value:function(a){var b=new Date(a.getTime());return this.context.set(a,b),b}},{key:"isRegExp",value:function(a){return a instanceof RegExp}},{key:"cloneRegExp",value:function(a){var b=new RegExp(a);return this.context.set(a,b),b}},{key:"isArray",value:function(a){return Array.isArray(a)}},{key:"cloneArray",value:function(a){var b=[];this.context.set(a,b);var c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;b.push(this.cloneChild(h))}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return b}},{key:"isObject",value:function(a){return a instanceof Object}},{key:"cloneObject",value:function(a){var b={};this.context.set(a,b);var c=!0,d=!1,f=void 0;try{for(var g,h=Object.entries(a)[Symbol.iterator]();!(c=(g=h.next()).done);c=!0){var i=e(g.value,2),j=i[0],k=i[1];b[j]=this.cloneChild(k)}}catch(l){d=!0,f=l}finally{try{!c&&h["return"]&&h["return"]()}finally{if(d)throw f}}return b}},{key:"cloneChild",value:function(a){return this.isCloneable(a)?this.cloneCloneable(a):this.clone(a)}},{key:"isCloneable",value:function(a){return"object"==typeof a&&"function"==typeof a[i.clone]}},{key:"cloneCloneable",value:function(a){return a[i.clone](this)}},{key:"cleanup",value:function(){0===this.recursionLevel&&this.context.clear()}}]),a}(),i={clone:Symbol("clone")},j=d({},i.clone,function(){var a=arguments.length<=0||void 0===arguments[0]?new h:arguments[0];return a.clone(this)}),k=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?1:arguments[1];f(this,a),this.hex=b,this.alpha=c}return g(a,null,[{key:"fromRGBA",value:function(b,c,d){var e=arguments.length<=3||void 0===arguments[3]?1:arguments[3],f=(b<<8|c)<<8|d;return new a(f,e)}},{key:"fromHSLA",value:function(b,c,d,e){b/=360;var f=void 0,g=void 0,h=void 0;if(0===c)f=g=h=d;else{var i=.5>=d?d*(c+1):d+c-d*c,j=2*d-i;f=a.hueToRGB(j,i,b+1/3),g=a.hueToRGB(j,i,b),h=a.hueToRGB(j,i,b-1/3)}f=Math.round(255*f),g=Math.round(255*g),h=Math.round(255*h);var k=(f<<8|g)<<8|h;return new a(k,e)}},{key:"hueToRGB",value:function(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}}]),g(a,[{key:"toRGBA",value:function(){var a=this.hex>>16&255,b=this.hex>>8&255,c=255&this.hex;return{r:a,g:b,b:c,a:this.alpha}}},{key:"toHSLA",value:function(){var a=(this.hex>>16&255)/255,b=(this.hex>>8&255)/255,c=(255&this.hex)/255,d=Math.max(a,b,c),e=Math.min(a,b,c),f=void 0,g=void 0,h=void 0;if(h=(d+e)/2,d===e)f=g=0;else{var i=d-e;switch(g=h>.5?i/(2-d-e):i/(d+e),d){case a:f=(b-c)/i+(c>b?6:0);break;case b:f=(c-a)/i+2;break;case c:f=(a-b)/i+4}f/=6}return{h:360*f,s:g,l:h,a:this.alpha}}},{key:"toString",value:function(){return"#"+this.hex.toString(16).padStart(6,"0")}}]),a}(),l={black:new k(0),silver:new k(12632256),gray:new k(8421504),white:new k(16777215),maroon:new k(8388608),red:new k(16711680),purple:new k(8388736),fuchsia:new k(16711935),green:new k(32768),lime:new k(65280),olive:new k(8421376),yellow:new k(16776960),navy:new k(128),blue:new k(255),teal:new k(32896),aqua:new k(65535),orange:new k(16753920),aliceblue:new k(15792383),antiquewhite:new k(16444375),aquamarine:new k(8388564),azure:new k(15794175),beige:new k(16119260),bisque:new k(16770244),blanchedalmond:new k(16770244),blueviolet:new k(9055202),brown:new k(10824234),burlywood:new k(14596231),cadetblue:new k(6266528),chartreuse:new k(8388352),chocolate:new k(13789470),coral:new k(16744272),cornflowerblue:new k(6591981),cornsilk:new k(16775388),crimson:new k(14423100),darkblue:new k(139),darkcyan:new k(35723),darkgoldenrod:new k(12092939),darkgray:new k(11119017),darkgreen:new k(25600),darkgrey:new k(11119017),darkkhaki:new k(12433259),darkmagenta:new k(9109643),darkolivegreen:new k(5597999),darkorange:new k(16747520),darkorchid:new k(10040012),darkred:new k(9109504),darksalmon:new k(15308410),darkseagreen:new k(9419919),darkslateblue:new k(4734347),darkslategray:new k(3100495),darkslategrey:new k(3100495),darkturquoise:new k(52945),darkviolet:new k(9699539),deeppink:new k(16716947),deepskyblue:new k(49151),dimgray:new k(6908265),dimgrey:new k(6908265),dodgerblue:new k(2003199),firebrick:new k(11674146),floralwhite:new k(16775920),forestgreen:new k(2263842),gainsboro:new k(14474460),ghostwhite:new k(16316671),gold:new k(16766720),goldenrod:new k(14329120),greenyellow:new k(11403055),grey:new k(8421504),honeydew:new k(15794160),hotpink:new k(16738740),indianred:new k(13458524),indigo:new k(4915330),ivory:new k(16777200),khaki:new k(15787660),lavender:new k(15132410),lavenderblush:new k(16773365),lawngreen:new k(8190976),lemonchiffon:new k(16775885),lightblue:new k(11393254),lightcoral:new k(15761536),lightcyan:new k(14745599),lightgoldenrodyellow:new k(16448210),lightgray:new k(13882323),lightgreen:new k(9498256),lightgrey:new k(13882323),lightpink:new k(16758465),lightsalmon:new k(16752762),lightseagreen:new k(2142890),lightskyblue:new k(8900346),lightslategray:new k(7833753),lightslategrey:new k(7833753),lightsteelblue:new k(11584734),lightyellow:new k(16777184),limegreen:new k(3329330),linen:new k(16445670),mediumaquamarine:new k(6737322),mediumblue:new k(205),mediumorchid:new k(12211667),mediumpurple:new k(9662683),mediumseagreen:new k(3978097),mediumslateblue:new k(8087790),mediumspringgreen:new k(64154),mediumturquoise:new k(4772300),mediumvioletred:new k(13047173),midnightblue:new k(1644912),mintcream:new k(16121850),mistyrose:new k(16770273),moccasin:new k(16770229),navajowhite:new k(16768685),oldlace:new k(16643558),olivedrab:new k(7048739),orangered:new k(16729344),orchid:new k(14315734),palegoldenrod:new k(15657130),palegreen:new k(10025880),paleturquoise:new k(11529966),palevioletred:new k(14381203),papayawhip:new k(16773077),peachpuff:new k(16767673),peru:new k(13468991),pink:new k(16761035),plum:new k(14524637),powderblue:new k(11591910),rosybrown:new k(12357519),royalblue:new k(4286945),saddlebrown:new k(9127187),salmon:new k(16416882),sandybrown:new k(16032864),seagreen:new k(3050327),seashell:new k(16774638),sienna:new k(10506797),skyblue:new k(8900331),slateblue:new k(6970061),slategray:new k(7372944),slategrey:new k(7372944),snow:new k(16775930),springgreen:new k(65407),steelblue:new k(4620980),tan:new k(13808780),thistle:new k(14204888),tomato:new k(16737095),turquoise:new k(4251856),violet:new k(15631086),wheat:new k(16113331),whitesmoke:new k(16119285),yellowgreen:new k(10145074),rebeccapurple:new k(6697881),transparent:new k(0,0)},m=function u(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=a.source,c=a.type,d=a.data;f(this,u),this.source=b,this.type=c,this.data=d},n={addListener:Symbol("addListener"),removeListener:Symbol("removeListener"),fireEvent:Symbol("fireEvent")},o=(b={},d(b,n.addListener,function(a,b){return this.eventManager[n.addListener](a,b),this}),d(b,n.removeListener,function(a,b){return this.eventManager[n.removeListener](a,b),this}),d(b,n.fireEvent,function(a){return this.eventManager[n.fireEvent](a),this}),b),p=function(){function a(){f(this,a),this.typeToListeners=new Map,this.listenerToTypes=new Map}return g(a,null,[{key:"makeEvent",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=a.source,c=a.type,d=a.data;return new m({source:b,type:c,data:d})}}]),g(a,[{key:n.addListener,value:function(a){var b=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];"string"==typeof b&&(b=[b]),this.listenerToTypes.has(a)||this.listenerToTypes.set(a,new Set);var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;this.typeToListeners.has(h)||this.typeToListeners.set(h,new Set),this.typeToListeners.get(h).add(a),this.listenerToTypes.get(a).add(h)}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return this}},{key:n.removeListener,value:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.listenerToTypes.get(a):arguments[1];"string"==typeof b&&(b=[b]);var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;this.typeToListeners.has(h)&&(this.typeToListeners.get(h)["delete"](a),0===this.typeToListeners.get(h).size&&this.typeToListeners["delete"](h),this.listenerToTypes.get(a)["delete"](h))}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return 0===this.listenerToTypes.get(a).size&&this.listenerToTypes["delete"](a),this}},{key:n.fireEvent,value:function(a){var b=void 0;b=a.type?this.typeToListeners.get(a.type)||[]:this.listenerToTypes.keys();var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h(a)}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return this}}]),a}(),q={addMethod:Symbol("addMethod"),removeMethod:Symbol("removeMethod"),addPlugin:Symbol("addPlugin"),removePlugin:Symbol("removePlugin")},r=(c={},d(c,q.addMethod,function(a,b){var c=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(!c&&this.hasOwnProperty(a))throw new Error("A property "+a+" exists already on "+this+".");return this[a]=b,this}),d(c,q.removeMethod,function(a){if(!this[a])throw new Error("A property "+a+" does not exist on "+this+".");return delete this[a],this}),d(c,q.addPlugin,function(a){return a.register(this),this}),d(c,q.removePlugin,function(a){return a.unregister(this),this}),c),s=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?"":arguments[0];f(this,a),this.prefix=b,this.counter=0}return g(a,[{key:"next",value:function(){return this.prefix+this.counter++}}]),a}(),t=function(){function a(){f(this,a)}return g(a,[{key:"register",value:function(a){}},{key:"unregister",value:function(a){}},{key:i.clone,value:function(){return this}}]),a}();a.cloneableSymbols=i,a.cloneableMixin=j,a.Cloner=h,a.Color=k,a.predefinedColors=l,a.Event=m,a.EventManager=p,a.extensibleSymbols=q,a.extensibleMixin=r,a.IDGenerator=s,a.observableSymbols=n,a.observableMixin=o,a.Plugin=t});